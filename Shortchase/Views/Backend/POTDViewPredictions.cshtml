@model ICollection<POTDListingPrediction>

@if (Model == null || Model.Count <= 0)
{
    <p class="mb-0 text-small font-weight-900">
        No predictions found on database for this POTD.
    </p>
}
else
{
    <table id="POTDDynamicPredictionsTable" class="table table-striped table-bordered w-100 table-responsive" cellspacing="0" width="100%">
        <thead>
            <tr>
                <th class="text-uppercase">Date Predicted</th>
                <th class="text-uppercase">User</th>
                <th class="text-uppercase">Market</th>
                <th class="text-uppercase">Tip</th>
                <th class="text-uppercase">Is Correct</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                string status = "";
                bool showValidateButton = false;
                bool showInValidateButton = false;
                if (item.VerifiedAsCorrect.HasValue)
                {
                    if (item.VerifiedAsCorrect.Value)
                    {
                        showValidateButton = false;
                        showInValidateButton = true;
                        status = "Correct prediction";
                    }
                    else
                    {
                        showValidateButton = true;
                        showInValidateButton = false;
                        status = "Wrong prediction";
                    }
                }
                else
                {
                    showValidateButton = true;
                    showInValidateButton = false;
                    status = "Not verified yet.";
                }

                <tr>

                    <td id="DatePredicted-@item.Id" data-value="@item.DatePredicted" data-order="@item.DatePredicted">@DateHelper.DateFormat(item.DatePredicted.FromUTCData(Convert.ToInt32(ViewData["TimezoneOffset"].ToString())))</td>
                    <td id="User-@item.Id" data-value="@item.PredictedById">
                        @item.PredictedBy.FirstName @item.PredictedBy.LastName
                        <br /> <span class="text-muted text-lowercase">@item.PredictedBy.Email</span>
                    </td>
                    <td id="Market-@item.Id" data-value="@item.MarketId">@item.Market.Name</td>
                    <td id="Tip-@item.Id" data-value="@item.TipId">@item.Tip.Description</td>
                    <td id="Correct-@item.Id" data-value="">
                        @status
                        @if (item.DateVerified.HasValue)
                        {
                            <text><br />@DateHelper.DateFormat(item.DateVerified.Value.FromUTCData(Convert.ToInt32(ViewData["TimezoneOffset"].ToString())))</text>
                        }
                        <br />
                        <button class="btn btn-sm btn-success PredictionValidationBtn" data-type="true" data-id="@item.Id"><i class="fas fa-check"></i> Valid</button>

                        <button class="btn btn-sm btn-warning PredictionValidationBtn" data-type="false" data-id="@item.Id"><i class="fas fa-close"></i> Invalid</button>

                    </td>

                </tr>
            }
        </tbody>
    </table>
}

